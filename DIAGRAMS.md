# 📊 Визуальные диаграммы работы бота

## 🔄 НОВЫЙ ПОТОК: Получение VPN ключа

```
                          ┌─────────────┐
                          │  Пользователь│
                          │  пишет /start│
                          └────────┬────┘
                                   │
                          ┌────────▼────────┐
                          │  Первый запуск? │
                          └────────┬────────┘
                                   │
                    ┌──────────────┴──────────────┐
                    │                             │
           ✅ ДА (новый)              ❌ НЕТ (повторный)
                    │                             │
         ┌──────────▼───────────┐       ┌────────▼────────┐
         │  Отправить           │       │  Показать       │
         │  инструкцию:         │       │  главное меню:  │
         │  "Быстрый старт"     │       │  ✅ Всё нормально│
         │  1️⃣2️⃣3️⃣4️⃣          │       └────────┬────────┘
         └──────────┬───────────┘                │
                    │                           │
                    └──────────────┬─────────────┘
                                   │
                        ┌──────────▼──────────┐
                        │ Нажимает кнопку:    │
                        │ 🔑 Сгенерировать   │
                        │    ключ            │
                        └──────────┬─────────┘
                                   │
                        ┌──────────▼──────────┐
                        │ Проверяет           │
                        │ подписку            │
                        └──────────┬─────────┘
                                   │
                  ┌────────────────┴──────────────┐
                  │                               │
         ✅ Живая (есть)        ❌ Истекла (нет)
                  │                               │
    ┌─────────────▼────────┐   ┌────────────▼───────────┐
    │ Переходит к:         │   │ Система автоматически: │
    │ "Введите название    │   │ 1. Даёт 3 дня подписку│
    │  устройства"         │   │ 2. Переходит к вводу   │
    │                      │   │    названия устройства  │
    └─────────────┬────────┘   └────────────┬───────────┘
                  │                         │
                  └────────────┬─────────────┘
                               │
                    ┌──────────▼──────────┐
                    │ Пользователь вводит:│
                    │ "iPhone" / "PC"...  │
                    └──────────┬──────────┘
                               │
                    ┌──────────▼──────────┐
                    │ Система создаёт     │
                    │ профиль на 3X-UI    │
                    │ (🔐 API запрос)    │
                    └──────────┬──────────┘
                               │
                    ┌──────────▼──────────┐
                    │ Сохраняет в БД      │
                    │ (таблица             │
                    │ VLESSProfile)       │
                    └──────────┬──────────┘
                               │
                    ┌──────────▼──────────────┐
                    │ Отправляет:             │
                    │ 🎉 "Ваш ключ готов!"   │
                    │ 📋 VLESS URL            │
                    │ 📱 Ссылки на приложения│
                    └──────────┬──────────────┘
                               │
                    ┌──────────▼──────────┐
                    │ Пользователь может: │
                    │ ✅ Скопировать URL   │
                    │ ✅ Скачать приложение│
                    │ ✅ Импортировать URL │
                    │ ✅ Подключиться к VPN│
                    └─────────────────────┘
```

---

## 🎮 ГЛАВНОЕ МЕНЮ - СТРУКТУРА КНОПОК

```
┌──────────────────────────────────────┐
│         ГЛАВНОЕ МЕНЮ                 │
│                                      │
│ Имя профиля: Иван Петров           │
│ Id: 123456789                        │
│ Статус: ✅ Все нормально             │
│                                      │
│ Для получения помощи введите /help  │
│       или /start                     │
├──────────────────────────────────────┤
│                                      │
│  ┌──────────────────────────────┐  │
│  │ 🔑 Сгенерировать ключ        │  │
│  │     (основная функция)       │  │
│  └──────────────────────────────┘  │
│                                      │
│  ┌────────────────┬──────────────┐  │
│  │ 📊 Статистика  │ 🔑 Мои ключи │  │
│  └────────────────┴──────────────┘  │
│                                      │
│  ┌──────────────────────────────┐  │
│  │ ℹ️ Помощь (ссылка на тебя)   │  │
│  └──────────────────────────────┘  │
│                                      │
│  ┌──────────────────────────────┐  │
│  │ ⚠️ Админ. меню (если админ)  │  │
│  └──────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

---

## 🆘 МЕНЮ ПОМОЩИ - НОВАЯ ВЕРСИЯ

```
┌─────────────────────────────────────┐
│       РАЗДЕЛ ПОМОЩЬ                 │
├─────────────────────────────────────┤
│                                     │
│ 📞 Служба поддержки:                │
│                                     │
│    ┌────────────────────────────┐  │
│    │ Написать @vadimkulishov   │  │  ← Кнопка с ссылкой
│    └────────────────────────────┘  │
│                                     │
│ ─────────────────────────────────   │
│                                     │
│ О боте:                             │
│ Разработчики: @QueenDekim          │
│               @cpn_moris            │
│                                     │
│ Отдельное спасибо @ascento за      │
│ помощь в разработке                 │
│                                     │
│ Официальный чат проекта             │
│                                     │
│ ─────────────────────────────────   │
│                                     │
│    ┌────────────────────────────┐  │
│    │ ⬅️ Назад                  │  │
│    └────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

---

## 📱 ИНСТРУКЦИЯ ПРИ ПЕРВОМ ВХОДЕ

```
┌──────────────────────────────────────┐
│      ПЕРВЫЙ ЗАПУСК /START            │
├──────────────────────────────────────┤
│                                      │
│ 🎉 Добро пожаловать в VPN бота     │
│    DevForge(Bot)!                    │
│                                      │
│ **Быстрый старт:**                   │
│                                      │
│ 1️⃣ Нажмите 🔑 **Сгенерировать     │
│    ключ**                            │
│                                      │
│ 2️⃣ Введите название устройства     │
│    (например: iPhone, PC,           │
│    Ноутбук)                         │
│                                      │
│ 3️⃣ Получите VLESS URL               │
│                                      │
│ 4️⃣ Импортируйте в приложение VPN   │
│                                      │
│ ─────────────────────────────────   │
│                                      │
│ **Важно:** У вас может быть только  │
│ 1 активный ключ одновременно.        │
│ При создании нового ключа старый    │
│ будет удален.                        │
│                                      │
│ ─────────────────────────────────   │
│                                      │
│ Нужна помощь? Нажмите ℹ️ **Помощь**│
│ в меню.                              │
│                                      │
└──────────────────────────────────────┘
```

---

## 🔑 УПРАВЛЕНИЕ КЛЮЧАМИ

```
┌──────────────────────────────────────┐
│      МОИ КЛЮЧИ                       │
├──────────────────────────────────────┤
│                                      │
│ 🔑 Ваши VPN ключи:                   │
│                                      │
│ • iPhone (создан 30-11-2025)         │
│   ┌────────────────────────────┐    │
│   │ 🗑️ Удалить iPhone         │    │
│   └────────────────────────────┘    │
│                                      │
│ • MacBook Pro (создан 29-11-2025)   │
│   ┌────────────────────────────┐    │
│   │ 🗑️ Удалить MacBook Pro    │    │
│   └────────────────────────────┘    │
│                                      │
│ • Windows PC (создан 28-11-2025)    │
│   ┌────────────────────────────┐    │
│   │ 🗑️ Удалить Windows PC     │    │
│   └────────────────────────────┘    │
│                                      │
│ ⬅️ Назад                             │
│                                      │
└──────────────────────────────────────┘

ПРИМЕЧАНИЕ: 
⚠️ При создании нового ключа старые 
автоматически удаляются (максимум 1)
```

---

## 📊 СТАТИСТИКА

```
┌──────────────────────────────────────┐
│      СТАТИСТИКА                      │
├──────────────────────────────────────┤
│                                      │
│ 📊 Ваша статистика:                  │
│                                      │
│ 1. iPhone                             │
│    🔼 Загружено: 250.50 MB           │
│    🔽 Скачано: 2.45 GB               │
│                                      │
│ 2. MacBook Pro                        │
│    🔼 Загружено: 500.00 MB           │
│    🔽 Скачано: 5.10 GB               │
│                                      │
│ ─────────────────────────────────   │
│ Всего:                               │
│ 🔼 Загружено: 750.50 MB              │
│ 🔽 Скачано: 7.55 GB                  │
│                                      │
└──────────────────────────────────────┘
```

---

## 🔐 ОГРАНИЧЕНИЕ: 1 ключ на пользователя

```
СЦЕНАРИЙ 1: Первый ключ
┌─────────────┐
│ Нажимаешь   │
│ "Сгенерировать"
└──────┬──────┘
       │
       ▼
┌──────────────────────┐
│ Система проверяет:   │
│ Есть ли ключи?       │
│ ❌ НЕТ               │
└──────┬───────────────┘
       │
       ▼
┌──────────────────────┐
│ Создаёт новый ключ   │
│ "iPhone"             │
│ ✅ ГОТОВ             │
└──────────────────────┘

СЦЕНАРИЙ 2: Повторное создание ключа
┌──────────────────────┐
│ У тебя есть ключ:    │
│ "iPhone"             │
└──────┬───────────────┘
       │
       ▼ Нажимаешь "Сгенерировать"
       │
       ▼
┌──────────────────────┐
│ Система:             │
│ 1. Удаляет старый    │
│    ключ "iPhone"     │
│ 2. Создаёт новый     │
│    ключ "PC"         │
│ ✅ ГОТОВ             │
└──────────────────────┘

РЕЗУЛЬТАТ:
⏱️ Всегда максимум 1 активный ключ
🔐 Безопасно и контролируемо
🗑️ Старые ключи автоматически удаляются
```

---

## 📝 РЕЗЮМЕ ИЗМЕНЕНИЙ

```
БЫЛО:                          СТАЛО:
─────────────────────────────────────────────

💵 Продлить    ─────────┐
✅ Подключить          │  🔑 Сгенерировать ключ
📊 Статистика          │  (одна кнопка, одно действие)
🔑 Мои ключи           │
ℹ️ Помощь       ─────────┘
                       
Статус: Активна        Статус: ✅ Все нормально
Дата: 30-12-2025       (без путающей информации)

Кнопка помощи:         Кнопка помощи:
@QueenDekim            + Написать @vadimkulishov
@cpn_moris             (НОВАЯ ССЫЛКА НА ТЕБЯ!)

Нет инструкции         Инструкция при /start
при входе              с 4 пунктами "Быстрый старт"
```

---

**Все диаграммы показывают НОВЫЙ, УЛУЧШЕННЫЙ поток работы бота! ✨**
